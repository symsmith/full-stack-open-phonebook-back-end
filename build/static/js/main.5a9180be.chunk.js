(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{25:function(e,n,t){},26:function(e,n,t){},46:function(e,n,t){"use strict";t.r(n);var o=t(2),s=t.n(o),a=t(19),c=t.n(a),r=(t(25),t(10)),i=t(20),u=t(3),l=(t(26),t(5)),h=t.n(l),d="/api/persons",m={getAll:function(){return h.a.get(d).then((function(e){return e.data}))},sendPerson:function(e){return h.a.post(d,e).then((function(e){return e.data}))},changeNumber:function(e){return h.a.put("".concat(d,"/").concat(e.id),e).then((function(e){return e.data}))},deletePerson:function(e){return h.a.delete("".concat(d,"/").concat(e))}},b=t(0),j=function(e){var n=e.level,t=e.message;return Object(b.jsx)("div",{className:"notification ".concat(n),children:t})},f=function(e){var n=e.filteringValue,t=e.handleFilteringChange;return Object(b.jsxs)("div",{children:["filter with"," ",Object(b.jsx)("input",{value:n,onChange:t})]})},v=function(e){var n=e.handleSubmit,t=e.newName,o=e.handleNameChange,s=e.newNumber,a=e.handleNumberChange;return Object(b.jsxs)("form",{onSubmit:n,children:[Object(b.jsxs)("div",{children:["name: ",Object(b.jsx)("input",{required:!0,value:t,onChange:o})]}),Object(b.jsxs)("div",{children:["number: ",Object(b.jsx)("input",{required:!0,value:s,onChange:a})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})},g=function(e){var n=e.entriesShown,t=e.setPersons,o=e.setNotificationStatus;return Object(b.jsx)("div",{children:n.map((function(e){return Object(b.jsxs)("p",{children:[e.name," \u2014 ",e.number," ",Object(b.jsx)("button",{onClick:function(){return window.confirm("Delete ".concat(e.name,"?"))?(n=e.id,void m.deletePerson(n).then((function(){m.getAll().then((function(e){t(e),o({show:!0,level:"success",message:"Removed entry"}),setTimeout((function(){o({show:!1,level:"",message:""})}),5e3)}))})).catch((function(e){o({show:!0,level:"error",message:e.response.data}),setTimeout((function(){o({show:!1,level:"",message:""})}),5e3)}))):null;var n},children:"Delete"})]},e.name)}))})},O=function(){var e=Object(o.useState)([]),n=Object(u.a)(e,2),t=n[0],s=n[1],a=Object(o.useState)(""),c=Object(u.a)(a,2),l=c[0],h=c[1],d=Object(o.useState)(""),O=Object(u.a)(d,2),w=O[0],p=O[1],x=Object(o.useState)(""),C=Object(u.a)(x,2),N=C[0],S=C[1],k=Object(o.useState)({show:!1,message:"",level:""}),P=Object(u.a)(k,2),y=P[0],L=P[1];Object(o.useEffect)((function(){m.getAll().then((function(e){s(e)}))}),[]);var T=t.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())}));return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),y.show?Object(b.jsx)(j,{level:y.level,message:y.message}):null,Object(b.jsx)(f,{filteringValue:N,handleFilteringChange:function(e){S(e.target.value)}}),Object(b.jsx)("h2",{children:"Add a new entry"}),Object(b.jsx)(v,{handleSubmit:function(e){if(e.preventDefault(),0===t.filter((function(e){return e.name.toLowerCase()===l.toLowerCase()})).length)m.sendPerson({name:l,number:w}).then((function(e){s([].concat(Object(i.a)(t),[e])),L({show:!0,level:"success",message:"Added ".concat(e.name)}),setTimeout((function(){L({show:!1,level:"",message:""})}),5e3)})).catch((function(e){console.log(e.response.data),L({show:!0,level:"error",message:e.response.data.error}),setTimeout((function(){L({show:!1,level:"",message:""})}),5e3)}));else if(window.confirm("".concat(l," is already added to the phonebook, replace the old number with a new one?"))){var n=t.find((function(e){return e.name.toLowerCase()===l.toLowerCase()}));m.changeNumber(Object(r.a)(Object(r.a)({},n),{},{number:w})).then((function(e){s(t.map((function(t){return t.id!==n.id?t:e}))),L({show:!0,level:"success",message:"Edited ".concat(e.name)}),setTimeout((function(){L({show:!1,level:"",message:""})}),5e3)})).catch((function(){L({show:!0,level:"error",message:"".concat(n.name," is already deleted on the server")}),setTimeout((function(){L({show:!1,level:"",message:""})}),5e3),s(t.filter((function(e){return e.name!==n.name})))}))}h(""),p("")},newName:l,handleNameChange:function(e){h(e.target.value)},newNumber:w,handleNumberChange:function(e){p(e.target.value)}}),Object(b.jsx)("h2",{children:"Numbers"}),Object(b.jsx)(g,{entriesShown:T,setPersons:s,setNotificationStatus:L})]})};c.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(O,{})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.5a9180be.chunk.js.map