{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["endpoint","personsUtils","getAll","axios","get","then","response","data","sendPerson","newPerson","post","changeNumber","put","id","deletePerson","delete","Notification","level","message","className","Filter","filteringValue","handleFilteringChange","value","onChange","Form","handleSubmit","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","required","type","Persons","entriesShown","setPersons","setNotificationStatus","map","person","name","number","onClick","window","confirm","allPersons","show","setTimeout","catch","e","App","useState","persons","setNewName","setNewNumber","setFilteringValue","notificationStatus","useEffect","allNumbers","filter","toLowerCase","includes","event","target","preventDefault","length","console","log","error","find","p","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5a9180be.chunk.js","sourcesContent":["import axios from \"axios\"\n\nconst endpoint = \"/api/persons\"\n\nconst getAll = () => {\n  const request = axios.get(endpoint)\n  return request.then((response) => response.data)\n}\n\nconst sendPerson = (newPerson) => {\n  const request = axios.post(endpoint, newPerson)\n  return request.then((response) => response.data)\n}\n\nconst changeNumber = (newPerson) => {\n  const request = axios.put(`${endpoint}/${newPerson.id}`, newPerson)\n  return request.then((response) => response.data)\n}\n\nconst deletePerson = (id) => {\n  return axios.delete(`${endpoint}/${id}`)\n}\n\nconst personsUtils = { getAll, sendPerson, changeNumber, deletePerson }\n\nexport default personsUtils\n","import React, { useState, useEffect } from \"react\"\nimport \"./App.css\"\nimport personsUtils from \"./services/persons\"\n\nconst Notification = ({ level, message }) => (\n  <div className={`notification ${level}`}>{message}</div>\n)\n\nconst Filter = ({ filteringValue, handleFilteringChange }) => (\n  <div>\n    filter with{\" \"}\n    <input value={filteringValue} onChange={handleFilteringChange} />\n  </div>\n)\n\nconst Form = ({\n  handleSubmit,\n  newName,\n  handleNameChange,\n  newNumber,\n  handleNumberChange\n}) => (\n  <form onSubmit={handleSubmit}>\n    <div>\n      name: <input required value={newName} onChange={handleNameChange} />\n    </div>\n    <div>\n      number: <input required value={newNumber} onChange={handleNumberChange} />\n    </div>\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n)\n\nconst Persons = ({ entriesShown, setPersons, setNotificationStatus }) => {\n  const handleDelete = (id) => {\n    personsUtils\n      .deletePerson(id)\n      .then(() => {\n        personsUtils.getAll().then((allPersons) => {\n          setPersons(allPersons)\n          setNotificationStatus({\n            show: true,\n            level: \"success\",\n            message: \"Removed entry\"\n          })\n          setTimeout(() => {\n            setNotificationStatus({ show: false, level: \"\", message: \"\" })\n          }, 5000)\n        })\n      })\n      .catch((e) => {\n        setNotificationStatus({\n          show: true,\n          level: \"error\",\n          message: e.response.data\n        })\n        setTimeout(() => {\n          setNotificationStatus({ show: false, level: \"\", message: \"\" })\n        }, 5000)\n      })\n  }\n  return (\n    <div>\n      {entriesShown.map((person) => (\n        <p key={person.name}>\n          {person.name} &mdash; {person.number}{\" \"}\n          <button\n            onClick={() =>\n              window.confirm(`Delete ${person.name}?`)\n                ? handleDelete(person.id)\n                : null\n            }\n          >\n            Delete\n          </button>\n        </p>\n      ))}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState(\"\")\n  const [newNumber, setNewNumber] = useState(\"\")\n  const [filteringValue, setFilteringValue] = useState(\"\")\n  const [notificationStatus, setNotificationStatus] = useState({\n    show: false,\n    message: \"\",\n    level: \"\"\n  })\n\n  useEffect(() => {\n    personsUtils.getAll().then((allNumbers) => {\n      setPersons(allNumbers)\n    })\n  }, [])\n\n  let entriesShown = persons.filter((e) =>\n    e.name.toLowerCase().includes(filteringValue.toLowerCase())\n  )\n\n  const handleFilteringChange = (event) => {\n    setFilteringValue(event.target.value)\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleSubmit = (event) => {\n    event.preventDefault()\n    if (\n      persons.filter((e) => e.name.toLowerCase() === newName.toLowerCase())\n        .length === 0\n    ) {\n      personsUtils\n        .sendPerson({\n          name: newName,\n          number: newNumber\n        })\n        .then((newPerson) => {\n          setPersons([...persons, newPerson])\n          setNotificationStatus({\n            show: true,\n            level: \"success\",\n            message: `Added ${newPerson.name}`\n          })\n          setTimeout(() => {\n            setNotificationStatus({ show: false, level: \"\", message: \"\" })\n          }, 5000)\n        })\n        .catch((e) => {\n          console.log(e.response.data)\n          setNotificationStatus({\n            show: true,\n            level: \"error\",\n            message: e.response.data.error\n          })\n          setTimeout(() => {\n            setNotificationStatus({ show: false, level: \"\", message: \"\" })\n          }, 5000)\n        })\n    } else {\n      if (\n        window.confirm(\n          `${newName} is already added to the phonebook, replace the old number with a new one?`\n        )\n      ) {\n        const person = persons.find(\n          (p) => p.name.toLowerCase() === newName.toLowerCase()\n        )\n        personsUtils\n          .changeNumber({\n            ...person,\n            number: newNumber\n          })\n          .then((newPerson) => {\n            setPersons(persons.map((p) => (p.id !== person.id ? p : newPerson)))\n            setNotificationStatus({\n              show: true,\n              level: \"success\",\n              message: `Edited ${newPerson.name}`\n            })\n            setTimeout(() => {\n              setNotificationStatus({ show: false, level: \"\", message: \"\" })\n            }, 5000)\n          })\n          .catch(() => {\n            setNotificationStatus({\n              show: true,\n              level: \"error\",\n              message: `${person.name} is already deleted on the server`\n            })\n            setTimeout(() => {\n              setNotificationStatus({ show: false, level: \"\", message: \"\" })\n            }, 5000)\n            setPersons(persons.filter((p) => p.name !== person.name))\n          })\n      }\n    }\n    setNewName(\"\")\n    setNewNumber(\"\")\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      {notificationStatus.show ? (\n        <Notification\n          level={notificationStatus.level}\n          message={notificationStatus.message}\n        />\n      ) : null}\n      <Filter\n        filteringValue={filteringValue}\n        handleFilteringChange={handleFilteringChange}\n      />\n      <h2>Add a new entry</h2>\n      <Form\n        handleSubmit={handleSubmit}\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      <Persons\n        entriesShown={entriesShown}\n        setPersons={setPersons}\n        setNotificationStatus={setNotificationStatus}\n      />\n    </div>\n  )\n}\n\nexport default App\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport \"./index.css\"\nimport App from \"./App\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}