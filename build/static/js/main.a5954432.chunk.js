(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{25:function(e,n,t){},26:function(e,n,t){},46:function(e,n,t){"use strict";t.r(n);var c=t(2),o=t.n(c),a=t(19),s=t.n(a),r=(t(25),t(10)),i=t(20),u=t(3),l=(t(26),t(5)),h=t.n(l),d="/api/persons",m={getAll:function(){return h.a.get(d).then((function(e){return e.data}))},sendPerson:function(e){return h.a.post(d,e).then((function(e){return e.data}))},changeNumber:function(e){return h.a.put("".concat(d,"/").concat(e.id),e).then((function(e){return e.data}))},deletePerson:function(e){return h.a.delete("".concat(d,"/").concat(e))}},b=t(0),j=function(e){var n=e.level,t=e.message;return Object(b.jsx)("div",{className:"notification ".concat(n),children:t})},f=function(e){var n=e.filteringValue,t=e.handleFilteringChange;return Object(b.jsxs)("div",{children:["filter with"," ",Object(b.jsx)("input",{value:n,onChange:t})]})},g=function(e){var n=e.handleSubmit,t=e.newName,c=e.handleNameChange,o=e.newNumber,a=e.handleNumberChange;return Object(b.jsxs)("form",{onSubmit:n,children:[Object(b.jsxs)("div",{children:["name: ",Object(b.jsx)("input",{required:!0,value:t,onChange:c})]}),Object(b.jsxs)("div",{children:["number: ",Object(b.jsx)("input",{required:!0,value:o,onChange:a})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})},v=function(e){var n=e.entriesShown,t=e.setPersons,c=e.setNotificationStatus;return Object(b.jsx)("div",{children:n.map((function(e){return Object(b.jsxs)("p",{children:[e.name," \u2014 ",e.number," ",Object(b.jsx)("button",{onClick:function(){return window.confirm("Delete ".concat(e.name,"?"))?(n=e.id,void m.deletePerson(n).then((function(){m.getAll().then((function(e){t(e),c({show:!0,level:"success",message:"Removed entry"}),setTimeout((function(){c({show:!1,level:"",message:""})}),5e3)}))})).catch((function(){c({show:!0,level:"error",message:"Something went wrong..."}),setTimeout((function(){c({show:!1,level:"",message:""})}),5e3)}))):null;var n},children:"Delete"})]},e.name)}))})},w=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],o=n[1],a=Object(c.useState)(""),s=Object(u.a)(a,2),l=s[0],h=s[1],d=Object(c.useState)(""),w=Object(u.a)(d,2),O=w[0],x=w[1],p=Object(c.useState)(""),C=Object(u.a)(p,2),S=C[0],N=C[1],k=Object(c.useState)({show:!1,message:"",level:""}),P=Object(u.a)(k,2),y=P[0],L=P[1];Object(c.useEffect)((function(){m.getAll().then((function(e){o(e)}))}),[]);var T=t.filter((function(e){return e.name.toLowerCase().includes(S.toLowerCase())}));return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),y.show?Object(b.jsx)(j,{level:y.level,message:y.message}):null,Object(b.jsx)(f,{filteringValue:S,handleFilteringChange:function(e){N(e.target.value)}}),Object(b.jsx)("h2",{children:"Add a new entry"}),Object(b.jsx)(g,{handleSubmit:function(e){if(e.preventDefault(),0===t.filter((function(e){return e.name.toLowerCase()===l.toLowerCase()})).length)m.sendPerson({name:l,number:O}).then((function(e){o([].concat(Object(i.a)(t),[e])),L({show:!0,level:"success",message:"Added ".concat(e.name)}),setTimeout((function(){L({show:!1,level:"",message:""})}),5e3)})).catch((function(){L({show:!0,level:"error",message:"Something went wrong..."}),setTimeout((function(){L({show:!1,level:"",message:""})}),5e3)}));else if(window.confirm("".concat(l," is already added to the phonebook, replace the old number with a new one?"))){var n=t.find((function(e){return e.name.toLowerCase()===l.toLowerCase()}));m.changeNumber(Object(r.a)(Object(r.a)({},n),{},{number:O})).then((function(e){o(t.map((function(t){return t.id!==n.id?t:e}))),L({show:!0,level:"success",message:"Edited ".concat(e.name)}),setTimeout((function(){L({show:!1,level:"",message:""})}),5e3)})).catch((function(){L({show:!0,level:"error",message:"".concat(n.name," is already deleted on the server")}),setTimeout((function(){L({show:!1,level:"",message:""})}),5e3),o(t.filter((function(e){return e.name!==n.name})))}))}h(""),x("")},newName:l,handleNameChange:function(e){h(e.target.value)},newNumber:O,handleNumberChange:function(e){x(e.target.value)}}),Object(b.jsx)("h2",{children:"Numbers"}),Object(b.jsx)(v,{entriesShown:T,setPersons:o,setNotificationStatus:L})]})};s.a.render(Object(b.jsx)(o.a.StrictMode,{children:Object(b.jsx)(w,{})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.a5954432.chunk.js.map